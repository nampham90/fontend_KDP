{"version":3,"file":"src_app_pages_comp_lazy_lazy-scroll_lazy-scroll_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEsC;;;AAE7F,MAAM,MAAM,GAAW,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,uGAAmB,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,aAAa,EAAE,EAAE,CAAC,CAAC;AAM7G,MAAM,uBAAuB;;8FAAvB,uBAAuB;oHAAvB,uBAAuB;wHAHxB,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEX,uBAAuB,oFAFxB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;ACTgD;AACwD;AACzF;AAC0B;AAEc;AACR;AAET;;;;;;;AAE9D,MAAM,2BAA2B,GAAG,sFAA+B,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAShF,MAAM,mBAAmB;IAQ9B,YAAoB,kBAAsC,EAAU,IAAY,EAAU,GAAsB,EAAU,eAA+B;QAArI,uBAAkB,GAAlB,kBAAkB,CAAoB;QAAU,SAAI,GAAJ,IAAI,CAAQ;QAAU,QAAG,GAAH,GAAG,CAAmB;QAAU,oBAAe,GAAf,eAAe,CAAgB;QAPzJ,mBAAc,GAA4B;YACxC,KAAK,EAAE,WAAW;YAClB,UAAU,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC;YACjC,IAAI,EAAE,WAAW;SAClB,CAAC;IAG0J,CAAC;IAE7J,QAAQ,KAAU,CAAC;IAEnB,eAAe;QACb,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE;YAC/B,+CAAS,CAAC,MAAM,EAAE,QAAQ,EAA2B,2BAA2B,CAAC;iBAC9E,IAAI,CACH,4DAAY,CAAC,EAAE,CAAC,EAChB,sDAAM,CAAC,GAAG,EAAE;gBACV,OAAO,MAAM,CAAC,OAAO,IAAI,GAAG,CAAC;YAC/B,CAAC,CAAC,EACF,0CAAI,CAAC,CAAC,CAAC,EACP,yDAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAChC;iBACA,SAAS,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;oBACzC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;gBAC3B,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACL,CAAC;;sFA9BU,mBAAmB;kHAAnB,mBAAmB;mEAMnB,wEAAW;;;;sFARX,CAAC,yFAAkB,EAAE,iFAAc,CAAC;QCjBjD,iFAAqE;QACrE,0EAA+B;QAC7B,qEAA+C;QAC/C,0EAAuD;QACrD,gIAAiC;QACnC,6DAAM;;QALS,+FAAiC;;;;;;;;;;;;;;;;;;;;ACEG;AAEkB;AACT;;AAMvD,MAAM,gBAAgB;;gFAAhB,gBAAgB;6GAAhB,gBAAgB;iHAFjB,+DAAY,EAAE,gFAAuB;mIAEpC,gBAAgB,mBAHZ,uEAAmB,aACxB,+DAAY,EAAE,gFAAuB","sources":["./src/app/pages/comp/lazy/lazy-scroll/lazy-scroll-routing.module.ts","./src/app/pages/comp/lazy/lazy-scroll/lazy-scroll.component.ts","./src/app/pages/comp/lazy/lazy-scroll/lazy-scroll.component.html","./src/app/pages/comp/lazy/lazy-scroll/lazy-scroll.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { LazyScrollComponent } from '@app/pages/comp/lazy/lazy-scroll/lazy-scroll.component';\r\n\r\nconst routes: Routes = [{ path: '', component: LazyScrollComponent, data: { title: '滚动懒加载', key: 'lazy-scroll' } }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class LazyScrollRoutingModule {}\r\n","import { normalizePassiveListenerOptions } from '@angular/cdk/platform';\r\nimport { Component, OnInit, ChangeDetectionStrategy, ViewChild, ChangeDetectorRef, AfterViewInit, NgZone } from '@angular/core';\r\nimport { fromEvent, take } from 'rxjs';\r\nimport { debounceTime, filter, takeUntil } from 'rxjs/operators';\r\n\r\nimport { LazyServiceService } from '@app/pages/comp/lazy/lazy-service.service';\r\nimport { DestroyService } from '@core/services/common/destory.service';\r\nimport { PageHeaderType } from '@shared/components/page-header/page-header.component';\r\nimport { AdDirective } from '@shared/directives/ad.directive';\r\n\r\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\r\n\r\n@Component({\r\n  selector: 'app-lazy-scroll',\r\n  templateUrl: './lazy-scroll.component.html',\r\n  styleUrls: ['./lazy-scroll.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [LazyServiceService, DestroyService]\r\n})\r\nexport class LazyScrollComponent implements OnInit, AfterViewInit {\r\n  pageHeaderInfo: Partial<PageHeaderType> = {\r\n    title: '滚动懒加载组件示例',\r\n    breadcrumb: ['首页', '组件', '滚动懒加载'],\r\n    desc: '滚动页面，加载组件'\r\n  };\r\n  @ViewChild(AdDirective, { static: true }) adHost!: AdDirective;\r\n\r\n  constructor(private lazyServiceService: LazyServiceService, private zone: NgZone, private cdr: ChangeDetectorRef, private destroyService$: DestroyService) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  ngAfterViewInit(): void {\r\n    this.lazyServiceService.adHost = this.adHost;\r\n    this.zone.runOutsideAngular(() => {\r\n      fromEvent(window, 'scroll', <AddEventListenerOptions>passiveEventListenerOptions)\r\n        .pipe(\r\n          debounceTime(50),\r\n          filter(() => {\r\n            return window.scrollY >= 200;\r\n          }),\r\n          take(1),\r\n          takeUntil(this.destroyService$)\r\n        )\r\n        .subscribe(() => {\r\n          this.lazyServiceService.create().then(() => {\r\n            this.cdr.detectChanges();\r\n          });\r\n        });\r\n    });\r\n  }\r\n}\r\n","<app-page-header [pageHeaderInfo]=\"pageHeaderInfo\"></app-page-header>\r\n<div class=\"normal-table-wrap\">\r\n  <div style=\"width: 800px; height: 100vh\"></div>\r\n  <div class=\"left-start-center\" style=\"flex-wrap: wrap\">\r\n    <ng-template appAd></ng-template>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { LazyScrollRoutingModule } from './lazy-scroll-routing.module';\r\nimport { LazyScrollComponent } from './lazy-scroll.component';\r\n\r\n@NgModule({\r\n  declarations: [LazyScrollComponent],\r\n  imports: [SharedModule, LazyScrollRoutingModule]\r\n})\r\nexport class LazyScrollModule {}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}