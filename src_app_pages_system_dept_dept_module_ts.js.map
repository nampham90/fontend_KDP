{"version":3,"file":"src_app_pages_system_dept_dept_module_ts.js","mappings":"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","sources":["./src/app/pages/system/dept/dept-routing.module.ts","./src/app/pages/system/dept/dept.component.ts","./src/app/pages/system/dept/dept.component.html","./src/app/pages/system/dept/dept.module.ts","./src/app/widget/biz-widget/system/dept-manage-modal/dept-manage-modal.component.ts","./src/app/widget/biz-widget/system/dept-manage-modal/dept-manage-modal.component.html","./src/app/widget/biz-widget/system/dept-manage-modal/dept-manage-modal.module.ts","./src/app/widget/biz-widget/system/dept-manage-modal/dept-manage-modal.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { DeptComponent } from '@app/pages/system/dept/dept.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DeptComponent,\r\n    data: { title: 'Quản lý bộ phận', key: 'dept' }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class DeptRoutingModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy, ViewChild, TemplateRef, ChangeDetectorRef } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\nimport { ActionCode } from '@app/config/actionCode';\r\nimport { OptionsInterface, SearchCommonVO } from '@core/services/types';\r\nimport { Dept, DeptService } from '@services/system/dept.service';\r\nimport { MyTableConfig } from '@shared/components/ant-table/ant-table.component';\r\nimport { PageHeaderType } from '@shared/components/page-header/page-header.component';\r\nimport { TreeNodeInterface } from '@shared/components/tree-table/tree-table.component';\r\nimport { MapKeyType, MapPipe, MapSet } from '@shared/pipes/map.pipe';\r\nimport { fnFlatDataHasParentToTree, fnFlattenTreeDataByDataList } from '@utils/treeTableTools';\r\nimport {NzSafeAny} from \"ng-zorro-antd/core/types\";\r\n\r\n\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzTableQueryParams } from 'ng-zorro-antd/table';\r\nimport { ModalBtnStatus } from '@widget/base-modal';\r\nimport { DeptManageModalService } from '@widget/biz-widget/system/dept-manage-modal/dept-manage-modal.service';\r\n\r\ninterface SearchParam {\r\n  departmentName: string;\r\n  state: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-dept',\r\n  templateUrl: './dept.component.html',\r\n  styleUrls: ['./dept.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DeptComponent implements OnInit {\r\n  @ViewChild('operationTpl', { static: true }) operationTpl!: TemplateRef<NzSafeAny>;\r\n  @ViewChild('state', { static: true }) state!: TemplateRef<NzSafeAny>;\r\n  ActionCode = ActionCode;\r\n  searchParam: Partial<SearchParam> = {};\r\n\r\n  tableConfig!: MyTableConfig;\r\n  pageHeaderInfo: Partial<PageHeaderType> = {\r\n    title: 'Quản lý bộ phận',\r\n    breadcrumb: ['Home', 'Quản ly hệ thống', 'Quản lý bộ phận']\r\n  };\r\n  dataList: TreeNodeInterface[] = [];\r\n  stateOptions: OptionsInterface[] = [];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private deptModalService: DeptManageModalService,\r\n    private dataService: DeptService,\r\n    private modalSrv: NzModalService,\r\n    public message: NzMessageService,\r\n    private router: Router,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  reloadTable(): void {\r\n    this.message.info('Đã được làm mới');\r\n    this.getDataList();\r\n  }\r\n\r\n  tableChangeDectction(): void {\r\n    this.dataList = [...this.dataList];\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  tableLoading(isLoading: boolean): void {\r\n    this.tableConfig.loading = isLoading;\r\n    this.tableChangeDectction();\r\n  }\r\n\r\n  getDataList(e?: NzTableQueryParams): void {\r\n    this.tableConfig.loading = true;\r\n    const params: SearchCommonVO<any> = {\r\n      pageSize: 0,\r\n      pageNum: 0,\r\n      filters: this.searchParam\r\n    };\r\n    this.dataService\r\n      .getDepts(params)\r\n      .pipe(\r\n        finalize(() => {\r\n          this.tableLoading(false);\r\n        })\r\n      )\r\n      .subscribe(deptList => {\r\n        const target = fnFlatDataHasParentToTree(deptList.list);\r\n        this.dataList = fnFlattenTreeDataByDataList(target);\r\n        this.tableLoading(false);\r\n      });\r\n  }\r\n\r\n  /*查看*/\r\n  check(id: string, children: any[], parent: any[]): void {\r\n    this.message.success(id);\r\n  }\r\n\r\n  /*重置*/\r\n  resetForm(): void {\r\n    this.searchParam = {};\r\n    this.getDataList();\r\n  }\r\n\r\n  add(fatherId: number): void {\r\n    this.deptModalService.show({ nzTitle: 'Thêm mới' }).subscribe(\r\n      res => {\r\n        if (!res || res.status === ModalBtnStatus.Cancel) {\r\n          return;\r\n        }\r\n        const param = { ...res.modalValue };\r\n        param.fatherId = fatherId;\r\n        this.tableLoading(true);\r\n        this.addEditData(param, 'addDepts');\r\n      },\r\n      error => this.tableLoading(false)\r\n    );\r\n  }\r\n\r\n  addEditData(param: Dept, methodName: 'editDepts' | 'addDepts'): void {\r\n    this.dataService[methodName](param)\r\n      .pipe(\r\n        finalize(() => {\r\n          this.tableLoading(false);\r\n        })\r\n      )\r\n      .subscribe(() => {\r\n        this.getDataList();\r\n      });\r\n  }\r\n\r\n  del(id: number): void {\r\n    const ids: number[] = [id];\r\n    this.modalSrv.confirm({\r\n      nzTitle: 'Bạn có chắc chắn muốn xóa không？',\r\n      nzContent: 'Không thể khôi phúc khi xóa',\r\n      nzOnOk: () => {\r\n        this.tableLoading(true);\r\n        this.dataService.delDepts(ids).subscribe(\r\n          () => {\r\n            if (this.dataList.length === 1) {\r\n              this.tableConfig.pageIndex--;\r\n            }\r\n            this.getDataList();\r\n          },\r\n          error => this.tableLoading(false)\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // 修改\r\n  edit(id: number, fatherId: number): void {\r\n    this.dataService.getDeptsDetail(id).subscribe(res => {\r\n      this.deptModalService.show({ nzTitle: 'Edit' }, res).subscribe(\r\n        ({ modalValue, status }) => {\r\n          if (status === ModalBtnStatus.Cancel) {\r\n            return;\r\n          }\r\n          modalValue.id = id;\r\n          modalValue.fatherId = fatherId;\r\n          this.tableLoading(true);\r\n          this.addEditData(modalValue, 'editDepts');\r\n        },\r\n        error => this.tableLoading(false)\r\n      );\r\n    });\r\n  }\r\n\r\n  // 修改一页几条\r\n  changePageSize(e: number): void {\r\n    this.tableConfig.pageSize = e;\r\n  }\r\n\r\n  private initTable(): void {\r\n    this.tableConfig = {\r\n      headers: [\r\n        {\r\n          title: 'Tên bộ phận',\r\n          width: 180,\r\n          field: 'tenphongban'\r\n        },\r\n        {\r\n          title: 'Trạng thái',\r\n          field: 'state',\r\n          tdTemplate: this.state,\r\n          width: 100\r\n        },\r\n        {\r\n          title: 'Loại',\r\n          field: 'orderNum',\r\n          width: 100\r\n        },\r\n        {\r\n          title: 'Ngày tạo',\r\n          field: 'createdAt',\r\n          pipe: 'date:yyyy-MM-dd HH:mm',\r\n          width: 180\r\n        },\r\n        {\r\n          title: 'Vận hành',\r\n          tdTemplate: this.operationTpl,\r\n          width: 250,\r\n          fixed: true,\r\n          fixedDir: 'right'\r\n        }\r\n      ],\r\n      total: 0,\r\n      showCheckbox: false,\r\n      loading: false,\r\n      pageSize: 10,\r\n      pageIndex: 1\r\n    };\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initTable();\r\n    this.stateOptions = [...MapPipe.transformMapToArray(MapSet.available, MapKeyType.Boolean)];\r\n  }\r\n}\r\n","<!--头部版块-->\r\n<app-page-header [pageHeaderInfo]=\"pageHeaderInfo\"></app-page-header>\r\n\r\n<div class=\"normal-table-wrap\">\r\n  <nz-card nzHoverable [nzBodyStyle]=\"{ 'padding-bottom': 0 }\" class=\"m-b-10\">\r\n    <form nz-form>\r\n      <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24 }\">\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n          <nz-form-item>\r\n            <nz-form-label [nzFor]=\"\">Tên bộ phận</nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input placeholder=\"Vui lòng nhập tên bộ phận\" name=\"departmentName\" [(ngModel)]=\"searchParam.departmentName\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n          <nz-form-item>\r\n            <nz-form-label [nzFor]=\"\">Tiểu bang</nz-form-label>\r\n            <nz-form-control>\r\n              <nz-select name=\"state\" [(ngModel)]=\"searchParam.state\" nzPlaceHolder=\"Sổ xuống lựa chọn\" nzAllowClear>\r\n                <nz-option *ngFor=\"let item of stateOptions\" [nzValue]=\"item.value\" [nzLabel]=\"item.label\"></nz-option>\r\n              </nz-select>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\" class=\"text-right p-0 m-b-10\">\r\n          <button (click)=\"getDataList()\" nz-button [nzType]=\"'primary'\">\r\n            <i nz-icon nzType=\"search\"></i>\r\n            Tìm kiếm\r\n          </button>\r\n          <button nz-button class=\"m-l-15\" (click)=\"resetForm()\">\r\n            <i nz-icon nzType=\"close-circle\" nzTheme=\"outline\"></i>\r\n            cài lại\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </nz-card>\r\n\r\n  <app-card-table-wrap [tableTitle]=\"'Danh sách bộ phận'\" (reload)=\"reloadTable()\" [btnTpl]=\"tableBtns\">\r\n    <app-tree-table [tableConfig]=\"tableConfig\" (changePageSize)=\"changePageSize($event)\" (changePageNum)=\"getDataList($event)\" [tableData]=\"dataList\"></app-tree-table>\r\n    <ng-template #operationTpl let-id=\"id\" let-fatherId=\"fatherId\">\r\n      <span *appAuth=\"ActionCode.DeptEdit\" class=\"operate-text\">\r\n        <button nz-button nzType=\"primary\" nzGhost (click)=\"edit(id, fatherId)\">Cập nhật</button>\r\n      </span>\r\n      <span *appAuth=\"ActionCode.DeptDel\" class=\"operate-text\">\r\n        <button nz-button nzType=\"primary\" nzGhost (click)=\"del(id)\">Xóa</button>\r\n      </span>\r\n      <span *appAuth=\"ActionCode.DeptAddLowLevel\" class=\"operate-text\" >\r\n        <button nz-button nzType=\"primary\" nzGhost (click)=\"add(id)\">Thêm Cấp Dưới</button>\r\n      </span>\r\n    </ng-template>\r\n  </app-card-table-wrap>\r\n</div>\r\n\r\n<ng-template #tableBtns>\r\n  <button (click)=\"add(0)\" nz-button nzType=\"primary\" class=\"m-r-8\">\r\n    <i nz-icon nzType=\"plus\"></i>\r\n   Thếm mới\r\n  </button>\r\n</ng-template>\r\n\r\n<ng-template #state let-state=\"state\">\r\n  <ng-container *ngTemplateOutlet=\"state ? yesTpl : notTpl\"></ng-container>\r\n</ng-template>\r\n<ng-template #yesTpl>\r\n  <nz-tag [nzColor]=\"'green'\">Cho phép</nz-tag>\r\n</ng-template>\r\n<ng-template #notTpl>\r\n  <nz-tag [nzColor]=\"'magenta'\">Vô hiệu hóa</nz-tag>\r\n</ng-template>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { DeptManageModalModule } from '@widget/biz-widget/system/dept-manage-modal/dept-manage-modal.module';\r\n\r\nimport { DeptRoutingModule } from './dept-routing.module';\r\nimport { DeptComponent } from './dept.component';\r\n\r\n@NgModule({\r\n  declarations: [DeptComponent],\r\n  imports: [SharedModule, DeptManageModalModule, DeptRoutingModule]\r\n})\r\nexport class DeptModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nimport { fnCheckForm } from '@utils/tools';\r\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\r\nimport { NzModalRef } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'app-dept-manage-modal',\r\n  templateUrl: './dept-manage-modal.component.html',\r\n  styleUrls: ['./dept-manage-modal.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DeptManageModalComponent implements OnInit {\r\n  addEditForm!: FormGroup;\r\n  params: object;\r\n\r\n  constructor(private modalRef: NzModalRef, private fb: FormBuilder) {\r\n    this.params = {};\r\n  }\r\n\r\n  initForm(): void {\r\n    this.addEditForm = this.fb.group({\r\n      tenphongban: [null, [Validators.required]],\r\n      state: [true],\r\n      orderNum: [0]\r\n    });\r\n  }\r\n\r\n  // 此方法为如果有异步数据需要加载，则在该方法中添加\r\n  protected getAsyncFnData(modalValue: NzSafeAny): Observable<NzSafeAny> {\r\n    return of(modalValue);\r\n  }\r\n\r\n  protected getCurrentValue(): Observable<NzSafeAny> {\r\n    if (!fnCheckForm(this.addEditForm)) {\r\n      return of(false);\r\n    }\r\n    return of(this.addEditForm.value);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n    if (Object.keys(this.params).length > 0) {\r\n      this.addEditForm.patchValue(this.params);\r\n    }\r\n  }\r\n}\r\n","<form nz-form [formGroup]=\"addEditForm\">\r\n  <nz-form-item>\r\n    <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired nzFor=\"tenphongban\">Tên bộ phận</nz-form-label>\r\n    <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" [nzErrorTip]=\"combineTpl\">\r\n      <input nz-input formControlName=\"tenphongban\" name=\"tenphongban\" placeholder=\"Vui lòng nhập tên phòng ban\" id=\"departmentName\" />\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n\r\n  <nz-form-item>\r\n    <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired nzFor=\"state\">Tình trạng bộ phận</nz-form-label>\r\n    <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" [nzErrorTip]=\"combineTpl\">\r\n      <nz-radio-group formControlName=\"state\">\r\n        <label nz-radio [nzValue]=\"false\">Vô hiệu hóa</label>\r\n        <label nz-radio [nzValue]=\"true\">Cho phép</label>\r\n      </nz-radio-group>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n\r\n  <nz-form-item>\r\n    <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired nzFor=\"orderNum\">Loại</nz-form-label>\r\n    <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\" [nzErrorTip]=\"combineTpl\">\r\n      <input nz-input formControlName=\"orderNum\" name=\"orderNum\" placeholder=\"Loại\" id=\"orderNum\" />\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n</form>\r\n\r\n<ng-template #combineTpl let-control>\r\n  <ng-container *ngIf=\"control.hasError('message')\">{{ control.errors.message }}</ng-container>\r\n  <ng-container *ngIf=\"control.hasError('required')\">Phần bắt buộc</ng-container>\r\n</ng-template>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { DeptManageModalComponent } from './dept-manage-modal.component';\r\n\r\n@NgModule({\r\n  declarations: [DeptManageModalComponent],\r\n  imports: [SharedModule]\r\n})\r\nexport class DeptManageModalModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { ModalWrapService } from '@widget/base-modal';\r\nimport { DeptManageModalComponent } from '@widget/biz-widget/system/dept-manage-modal/dept-manage-modal.component';\r\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\r\nimport { ModalOptions } from 'ng-zorro-antd/modal';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DeptManageModalService {\r\n  constructor(private modalWrapService: ModalWrapService) {}\r\n  protected getContentComponent(): NzSafeAny {\r\n    return DeptManageModalComponent;\r\n  }\r\n\r\n  public show(modalOptions: ModalOptions = {}, params?: object): Observable<NzSafeAny> {\r\n    return this.modalWrapService.show(this.getContentComponent(), modalOptions, params);\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}