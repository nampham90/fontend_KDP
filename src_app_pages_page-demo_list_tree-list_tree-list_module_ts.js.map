{"version":3,"file":"src_app_pages_page-demo_list_tree-list_tree-list_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEqC;;;AAE5F,MAAM,MAAM,GAAW,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,sGAAiB,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC;AAM5G,MAAM,qBAAqB;;0FAArB,qBAAqB;kHAArB,qBAAqB;sHAHtB,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEX,qBAAqB,oFAFtB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACT8F;AAOlD;;;;;;;;;;;;;;;;;;;;;;;;ICiB5D,wEAAkC;IAChC,yEAAkF;IAEpD,+FAAM;IAAA,4DAAgB;IAChD,kFAAiB;IAC+B,+TAAa,2FACzE,IAD0F;IAA5E,4DAA+E;IAIrF,yEAAkF;IAEpD,wEAAE;IAAA,4DAAgB;IAC5C,mFAAiB;IAC+B,iUAAa,4FACzE,IAD0F;IAA5E,4DAA+E;IAIrF,0EAAkF;IAEpD,gGAAM;IAAA,4DAAgB;IAChD,mFAAiB;IAC+B,iUAAa,4FACzE,IAD0F;IAA5E,4DAA+E;IAIvF,qEAAe;;;IAxBD,0DAAW;IAAX,oEAAW;IAI6B,0DAA8B;IAA9B,4FAA8B;IAItE,0DAAW;IAAX,oEAAW;IAI6B,0DAA8B;IAA9B,4FAA8B;IAItE,0DAAW;IAAX,oEAAW;IAI6B,0DAA8B;IAA9B,4FAA8B;;;IAgBhF,uEAAyB;IAAA,uEAAE;IAAA,4DAAO;;;IAClC,uEAA0B;IAAA,uEAAE;IAAA,4DAAO;;;;IAmBzC,2EAAiE;IAAtC,6aAAS,yGAA2B,KAAC;IAAC,uEAAE;IAAA,4DAAO;IAG1E,2EAA6C;IAAlB,2VAAS,6EAAO,KAAC;IAAC,uEAAE;IAAA,4DAAO;IACtD,2EAA8C;IAAnB,2VAAS,8EAAQ,KAAC;IAAC,uEAAE;IAAA,4DAAO;;;IAK3D,0EAA0D;;;IAA1B,2EAAc;;;;IAG9C,6EAAiE;IAAzD,0SAAS,uEAAK,KAAC;IACrB,mEAA6B;IAC7B,yEACF;IAAA,4DAAS;IACT,6EAAsD;IAA9C,0SAAS,0EAAQ,KAAC;IACxB,mEAA+B;IAC/B,yEACF;IAAA,4DAAS;;;;AD5EJ,MAAM,iBAAiB;IAe5B,YAAoB,EAAe,EAAU,QAAwB,EAAS,OAAyB,EAAU,MAAc,EAAU,GAAsB;QAA3I,OAAE,GAAF,EAAE,CAAa;QAAU,aAAQ,GAAR,QAAQ,CAAgB;QAAS,YAAO,GAAP,OAAO,CAAkB;QAAU,WAAM,GAAN,MAAM,CAAQ;QAAU,QAAG,GAAH,GAAG,CAAmB;QAZ/J,gBAAW,GAAyB,EAAE,CAAC;QAEvC,eAAU,GAAG,IAAI,CAAC;QAElB,mBAAc,GAA4B;YACxC,KAAK,EAAE,kCAAkC;YACzC,8CAA8C;YAC9C,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;SAClC,CAAC;QACF,qBAAgB,GAAU,EAAE,CAAC;QAC7B,aAAQ,GAAgB,EAAE,CAAC;IAEuI,CAAC;IAEnK,WAAW;QACT,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,WAAW;IACX,oBAAoB;QAClB,cAAc;QACd,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;IAC3B,CAAC;IAED,YAAY,CAAC,SAAkB;QAC7B,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,SAAS,CAAC;QACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED,WAAW,CAAC,CAAsB;QAChC,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,IAAI,CAAC;QAChC,MAAM,MAAM,GAA8B;YACxC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,QAAS;YACpC,OAAO,EAAE,CAAC,EAAE,SAAU,IAAI,IAAI,CAAC,WAAW,CAAC,SAAU;SACtD,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,QAAQ,GAAG;gBACd;oBACE,EAAE,EAAE,GAAG;oBACP,IAAI,EAAE,gBAAgB;oBACtB,GAAG,EAAE,GAAG;oBACR,GAAG,EAAE,EAAE;oBACP,OAAO,EAAE,0BAA0B;oBACnC,QAAQ,EAAE;wBACR;4BACE,EAAE,EAAE,KAAK;4BACT,IAAI,EAAE,YAAY;4BAClB,GAAG,EAAE,EAAE;4BACP,GAAG,EAAE,GAAG;4BACR,OAAO,EAAE,0BAA0B;yBACpC;wBACD;4BACE,EAAE,EAAE,KAAK;4BACT,IAAI,EAAE,gBAAgB;4BACtB,GAAG,EAAE,EAAE;4BACP,GAAG,EAAE,GAAG;4BACR,OAAO,EAAE,0BAA0B;4BACnC,QAAQ,EAAE;gCACR;oCACE,EAAE,EAAE,OAAO;oCACX,IAAI,EAAE,aAAa;oCACnB,GAAG,EAAE,GAAG;oCACR,GAAG,EAAE,EAAE;oCACP,OAAO,EAAE,0BAA0B;iCACpC;6BACF;yBACF;wBACD;4BACE,EAAE,EAAE,KAAK;4BACT,IAAI,EAAE,eAAe;4BACrB,GAAG,EAAE,EAAE;4BACP,GAAG,EAAE,GAAG;4BACR,OAAO,EAAE,wBAAwB;4BACjC,QAAQ,EAAE;gCACR;oCACE,EAAE,EAAE,OAAO;oCACX,IAAI,EAAE,WAAW;oCACjB,GAAG,EAAE,GAAG;oCACR,GAAG,EAAE,EAAE;oCACP,OAAO,EAAE,wBAAwB;oCACjC,QAAQ,EAAE;wCACR;4CACE,EAAE,EAAE,SAAS;4CACb,IAAI,EAAE,eAAe;4CACrB,GAAG,EAAE,GAAG;4CACR,GAAG,EAAE,EAAE;4CACP,OAAO,EAAE,wBAAwB;yCAClC;wCACD;4CACE,EAAE,EAAE,SAAS;4CACb,IAAI,EAAE,iBAAiB;4CACvB,GAAG,EAAE,GAAG;4CACR,GAAG,EAAE,EAAE;4CACP,OAAO,EAAE,wBAAwB;yCAClC;qCACF;iCACF;6BACF;yBACF;qBACF;iBACF;gBACD;oBACE,EAAE,EAAE,GAAG;oBACP,IAAI,EAAE,WAAW;oBACjB,GAAG,EAAE,GAAG;oBACR,GAAG,EAAE,EAAE;oBACP,OAAO,EAAE,wBAAwB;iBAClC;aACF,CAAC;YACF,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,EAAE,CAAC;YAC5B,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC;YAC/B,MAAM,YAAY,GAAG;gBACnB;oBACE,EAAE,EAAE,GAAG;oBACP,IAAI,EAAE,gBAAgB;oBACtB,GAAG,EAAE,GAAG;oBACR,GAAG,EAAE,EAAE;oBACP,OAAO,EAAE,0BAA0B;oBACnC,QAAQ,EAAE;wBACR;4BACE,EAAE,EAAE,KAAK;4BACT,IAAI,EAAE,gBAAgB;4BACtB,GAAG,EAAE,EAAE;4BACP,GAAG,EAAE,GAAG;4BACR,OAAO,EAAE,0BAA0B;4BACnC,QAAQ,EAAE;gCACR;oCACE,EAAE,EAAE,OAAO;oCACX,IAAI,EAAE,aAAa;oCACnB,GAAG,EAAE,GAAG;oCACR,GAAG,EAAE,EAAE;oCACP,OAAO,EAAE,0BAA0B;iCACpC;6BACF;yBACF;wBACD;4BACE,EAAE,EAAE,KAAK;4BACT,IAAI,EAAE,eAAe;4BACrB,GAAG,EAAE,EAAE;4BACP,GAAG,EAAE,GAAG;4BACR,OAAO,EAAE,wBAAwB;4BACjC,QAAQ,EAAE;gCACR;oCACE,EAAE,EAAE,OAAO;oCACX,IAAI,EAAE,WAAW;oCACjB,GAAG,EAAE,GAAG;oCACR,GAAG,EAAE,EAAE;oCACP,OAAO,EAAE,wBAAwB;oCACjC,QAAQ,EAAE;wCACR;4CACE,EAAE,EAAE,SAAS;4CACb,IAAI,EAAE,eAAe;4CACrB,GAAG,EAAE,GAAG;4CACR,GAAG,EAAE,EAAE;4CACP,OAAO,EAAE,wBAAwB;yCAClC;wCACD;4CACE,EAAE,EAAE,SAAS;4CACb,IAAI,EAAE,iBAAiB;4CACvB,GAAG,EAAE,GAAG;4CACR,GAAG,EAAE,EAAE;4CACP,OAAO,EAAE,wBAAwB;yCAClC;qCACF;iCACF;6BACF;yBACF;qBACF;iBACF;aACF,CAAC;YACF,IAAI,CAAC,gBAAgB,GAAG,kFAA2B,CAAC,YAAY,CAAC,CAAC;YAClE,sDAAsD;YACtD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,6BAA6B;QAC7B,mCAAmC;QACnC,wCAAwC;QACxC,0CAA0C;QAC1C,0DAA0D;QAC1D,8BAA8B;QAC9B,KAAK;QACL,gEAAgE;QAChE,8BAA8B;QAC9B,2BAA2B;QAC3B,yCAAyC;QACzC,+BAA+B;QAC/B,qCAAqC;QACrC,2CAA2C;QAC3C,8BAA8B;QAC9B,wDAAwD;QACxD,OAAO;IACT,CAAC;IAED,MAAM;IACN,cAAc;QACZ,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;IACrC,CAAC;IAED,MAAM;IACN,KAAK,CAAC,EAAU,EAAE,QAAe,EAAE,MAAa;QAC9C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACzB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACtB,CAAC;IAED,MAAM;IACN,SAAS;QACP,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,GAAG;QACD,+DAA+D;QAC/D,wDAAwD;QACxD,cAAc;QACd,MAAM;QACN,6BAA6B;QAC7B,oDAAoD;QACpD,yCAAyC;IAC3C,CAAC;IAED,GAAG,CAAC,EAAU;QACZ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;YACpB,OAAO,EAAE,SAAS;YAClB,SAAS,EAAE,SAAS;YACpB,MAAM,EAAE,GAAG,EAAE;gBACX,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;gBACxB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACxD,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAC1B,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EACvD,CAAC,CACF,CAAC;gBACF,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBACzB,cAAc;gBACd,sDAAsD;gBACtD,sCAAsC;gBACtC,oCAAoC;gBACpC,MAAM;gBACN,wBAAwB;gBACxB,8FAA8F;gBAC9F,yCAAyC;YAC3C,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;YACpC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;gBACpB,OAAO,EAAE,SAAS;gBAClB,SAAS,EAAE,SAAS;gBACpB,MAAM,EAAE,GAAG,EAAE;oBACX,MAAM,UAAU,GAAa,EAAE,CAAC;oBAChC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACnC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBAC3B,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;oBACxB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBAC9D,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;oBAC3B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;oBACzB,cAAc;oBACd,4DAA4D;oBAC5D,sCAAsC;oBACtC,oCAAoC;oBACpC,MAAM;oBACN,wBAAwB;oBACxB,gCAAgC;oBAChC,yCAAyC;gBAC3C,CAAC;aACF,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAC5B,OAAO;SACR;IACH,CAAC;IAED,KAAK;IACL,IAAI,CAAC,EAAU;QACb,2DAA2D;QAC3D,uFAAuF;QACvF,8CAA8C;QAC9C,gBAAgB;QAChB,QAAQ;QACR,0BAA0B;QAC1B,+BAA+B;QAC/B,mDAAmD;QACnD,2CAA2C;QAC3C,MAAM;IACR,CAAC;IAED,mFAAmF;IACnF,0DAA0D;IAC1D,0BAA0B;IAC1B,QAAQ;IACR,IAAI;IAEJ,UAAU,CAAC,CAAW;QACpB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;IAC3D,CAAC;IAED,aAAa;IACb,eAAe,CAAC,CAAM;QACpB,IAAI,CAAC,gBAAgB,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC/B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACrC,CAAC;IAED,SAAS;IACT,cAAc,CAAC,CAAS;QACtB,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC;IAChC,CAAC;IAEO,SAAS;QACf;;;aAGK;QACL,IAAI,CAAC,WAAW,GAAG;YACjB,OAAO,EAAE;gBACP;oBACE,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,GAAG;oBACV,KAAK,EAAE,MAAM;oBACb,QAAQ,EAAE,IAAI;oBACd,WAAW,EAAE,CAAC,cAAc,CAAC;iBAC9B;gBACD;oBACE,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,KAAK;oBACZ,KAAK,EAAE,GAAG;oBACV,UAAU,EAAE,IAAI,CAAC,YAAY;iBAC9B;gBACD;oBACE,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,KAAK;oBACZ,KAAK,EAAE,GAAG;oBACV,QAAQ,EAAE,IAAI;iBACf;gBACD;oBACE,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,SAAS;iBACjB;gBACD;oBACE,KAAK,EAAE,IAAI;oBACX,UAAU,EAAE,IAAI,CAAC,YAAY;oBAC7B,KAAK,EAAE,GAAG;oBACV,KAAK,EAAE,IAAI;oBACX,QAAQ,EAAE,OAAO;iBAClB;aACF;YACD,KAAK,EAAE,CAAC;YACR,YAAY,EAAE,IAAI;YAClB,OAAO,EAAE,KAAK;YACd,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,CAAC;SACb,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;;kFA/WU,iBAAiB;+GAAjB,iBAAiB;;;;;;;;QCvB9B,gFAAqE;QAErE,yEAA+B;QAE3B,4EAAiC;QACjC,0EAAc;QAIoB,mFAAI;QAAA,4DAAgB;QAC9C,mFAAiB;QACmC,oMAAkC;QAApF,4DAAuF;QAI7F,0EAAkF;QAEpD,wEAAE;QAAA,4DAAgB;QAC5C,mFAAiB;QAC+B,gMAA8B;QAA5E,4DAA+E;QAIrF,mIAyBe;QAEf,2EAA+G;QAE3G,oEAA+B;QAC/B,0EACF;QAAA,4DAAS;QACT,8EAAuD;QAAtB,0IAAS,eAAW,IAAC;QACpD,oEAAuD;QACvD,0EACF;QAAA,4DAAS;QACT,yEAA4D;QAA3B,qIAAS,oBAAgB,IAAC;QACzD,iHAAkC;QAClC,iHAAmC;QACnC,oEAAqD;QACvD,4DAAI;QAMZ,2FAAmE;QAA9C,yJAAU,iBAAa,IAAC;QAC3C,sFAQC;QAPC,0KAAkB,2BAAuB,IAAC,kGAEhC,sBAAkB,IAFc,kHAIxB,0BAAsB,IAJE,gHAKzB,uBAAmB,IALM;QAO3C,4DAAiB;QAClB,4MAMc;QAChB,4DAAsB;QAExB,4MAEc;QACd,4MASc;;;QApGG,8FAAiC;QAGvC,0DAAuC;QAAvC,+IAAuC;QAGhC,0DAAsC;QAAtC,4IAAsC;QACpC,0DAAW;QAAX,oEAAW;QAIiC,0DAAkC;QAAlC,6FAAkC;QAI9E,0DAAW;QAAX,oEAAW;QAI6B,0DAA8B;QAA9B,yFAA8B;QAInE,0DAAiB;QAAjB,iFAAiB;QA2BpB,0DAAW;QAAX,oEAAW;QACH,0DAAoB;QAApB,6EAAoB;QAS7B,0DAAgB;QAAhB,gFAAgB;QAChB,0DAAiB;QAAjB,iFAAiB;QACb,0DAAqC;QAArC,kGAAqC;QAOZ,0DAAoB;QAApB,uEAAoB;QAG9D,0DAA8B;QAA9B,2FAA8B;;;;;;;;;;;;;;;;;;;;ACvEiB;AAEc;AACT;;AAMnD,MAAM,cAAc;;4EAAd,cAAc;2GAAd,cAAc;+GAFf,+DAAY,EAAE,4EAAqB;mIAElC,cAAc,mBAHV,mEAAiB,aACtB,+DAAY,EAAE,4EAAqB","sources":["./src/app/pages/page-demo/list/tree-list/tree-list-routing.module.ts","./src/app/pages/page-demo/list/tree-list/tree-list.component.ts","./src/app/pages/page-demo/list/tree-list/tree-list.component.html","./src/app/pages/page-demo/list/tree-list/tree-list.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { TreeListComponent } from '@app/pages/page-demo/list/tree-list/tree-list.component';\r\n\r\nconst routes: Routes = [{ path: '', component: TreeListComponent, data: { title: 'Dạng cây', key: 'tree-list' } }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class TreeListRoutingModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy, ViewChild, TemplateRef, ChangeDetectorRef } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { SearchCommonVO } from '@core/services/types';\r\nimport { MyTableConfig, SortFile } from '@shared/components/ant-table/ant-table.component';\r\nimport { PageHeaderType } from '@shared/components/page-header/page-header.component';\r\nimport { fnFlattenTreeDataByDataList } from '@utils/treeTableTools';\r\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzTableQueryParams } from 'ng-zorro-antd/table';\r\n\r\ninterface SearchParam {\r\n  ruleName: number;\r\n  desc: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-tree-list',\r\n  templateUrl: './tree-list.component.html',\r\n  styleUrls: ['./tree-list.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TreeListComponent implements OnInit {\r\n  @ViewChild('highLightTpl', { static: true }) highLightTpl!: TemplateRef<NzSafeAny>;\r\n  @ViewChild('operationTpl', { static: true }) operationTpl!: TemplateRef<NzSafeAny>;\r\n  searchParam: Partial<SearchParam> = {};\r\n\r\n  isCollapse = true;\r\n  tableConfig!: MyTableConfig;\r\n  pageHeaderInfo: Partial<PageHeaderType> = {\r\n    title: '树状表格（演示默认值的情况，删除或者查看，可以打印选中行的id）',\r\n    // desc: '表单页用于向用户收集或验证信息，基础表单常见于数据项较少的表单场景。',\r\n    breadcrumb: ['首页', '列表页', '树状表格']\r\n  };\r\n  checkedCashArray: any[] = [];\r\n  dataList: NzSafeAny[] = [];\r\n\r\n  constructor(private fb: FormBuilder, private modalSrv: NzModalService, public message: NzMessageService, private router: Router, private cdr: ChangeDetectorRef) {}\r\n\r\n  reloadTable(): void {\r\n    this.message.info('已经刷新了');\r\n    this.getDataList();\r\n  }\r\n\r\n  // 触发表格变更检测\r\n  tableChangeDectction(): void {\r\n    // 改变引用触发变更检测。\r\n    this.dataList = [...this.dataList];\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  tableLoading(isLoading: boolean): void {\r\n    this.tableConfig.loading = isLoading;\r\n    this.tableChangeDectction();\r\n  }\r\n\r\n  getDataList(e?: NzTableQueryParams): void {\r\n    this.tableConfig.loading = true;\r\n    const params: SearchCommonVO<NzSafeAny> = {\r\n      pageSize: this.tableConfig.pageSize!,\r\n      pageNum: e?.pageIndex! || this.tableConfig.pageIndex!\r\n    };\r\n    this.dataList = [];\r\n    setTimeout(() => {\r\n      this.dataList = [\r\n        {\r\n          id: `1`,\r\n          name: 'John Brown sr.',\r\n          sex: '男',\r\n          age: 60,\r\n          address: 'New York No. 1 Lake Park',\r\n          children: [\r\n            {\r\n              id: `1-1`,\r\n              name: 'John Brown',\r\n              age: 42,\r\n              sex: '男',\r\n              address: 'New York No. 2 Lake Park'\r\n            },\r\n            {\r\n              id: `1-2`,\r\n              name: 'John Brown jr.',\r\n              age: 30,\r\n              sex: '男',\r\n              address: 'New York No. 3 Lake Park',\r\n              children: [\r\n                {\r\n                  id: `1-2-1`,\r\n                  name: 'Jimmy Brown',\r\n                  sex: '男',\r\n                  age: 16,\r\n                  address: 'New York No. 3 Lake Park'\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              id: `1-3`,\r\n              name: 'Jim Green sr.',\r\n              age: 72,\r\n              sex: '男',\r\n              address: 'London No. 1 Lake Park',\r\n              children: [\r\n                {\r\n                  id: `1-3-1`,\r\n                  name: 'Jim Green',\r\n                  sex: '男',\r\n                  age: 42,\r\n                  address: 'London No. 2 Lake Park',\r\n                  children: [\r\n                    {\r\n                      id: `1-3-1-1`,\r\n                      name: 'Jim Green jr.',\r\n                      sex: '男',\r\n                      age: 25,\r\n                      address: 'London No. 3 Lake Park'\r\n                    },\r\n                    {\r\n                      id: `1-3-1-2`,\r\n                      name: 'Jimmy Green sr.',\r\n                      sex: '男',\r\n                      age: 18,\r\n                      address: 'London No. 4 Lake Park'\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: `2`,\r\n          name: 'Joe Black',\r\n          sex: '男',\r\n          age: 32,\r\n          address: 'Sidney No. 1 Lake Park'\r\n        }\r\n      ];\r\n      this.tableConfig.total = 13;\r\n      this.tableConfig.pageIndex = 1;\r\n      const cashFromHttp = [\r\n        {\r\n          id: `1`,\r\n          name: 'John Brown sr.',\r\n          sex: '男',\r\n          age: 60,\r\n          address: 'New York No. 1 Lake Park',\r\n          children: [\r\n            {\r\n              id: `1-2`,\r\n              name: 'John Brown jr.',\r\n              age: 30,\r\n              sex: '男',\r\n              address: 'New York No. 3 Lake Park',\r\n              children: [\r\n                {\r\n                  id: `1-2-1`,\r\n                  name: 'Jimmy Brown',\r\n                  sex: '男',\r\n                  age: 16,\r\n                  address: 'New York No. 3 Lake Park'\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              id: `1-3`,\r\n              name: 'Jim Green sr.',\r\n              age: 72,\r\n              sex: '男',\r\n              address: 'London No. 1 Lake Park',\r\n              children: [\r\n                {\r\n                  id: `1-3-1`,\r\n                  name: 'Jim Green',\r\n                  sex: '男',\r\n                  age: 42,\r\n                  address: 'London No. 2 Lake Park',\r\n                  children: [\r\n                    {\r\n                      id: `1-3-1-1`,\r\n                      name: 'Jim Green jr.',\r\n                      sex: '男',\r\n                      age: 25,\r\n                      address: 'London No. 3 Lake Park'\r\n                    },\r\n                    {\r\n                      id: `1-3-1-2`,\r\n                      name: 'Jimmy Green sr.',\r\n                      sex: '男',\r\n                      age: 18,\r\n                      address: 'London No. 4 Lake Park'\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      ];\r\n      this.checkedCashArray = fnFlattenTreeDataByDataList(cashFromHttp);\r\n      // this.checkedCashArray = [...this.checkedCashArray];\r\n      this.tableLoading(false);\r\n    });\r\n\r\n    /*-----实际业务请求http接口如下------*/\r\n    // this.tableConfig.loading = true;\r\n    // const params: SearchCommonVO<any> = {\r\n    //   pageSize: this.tableConfig.pageSize!,\r\n    //   pageNum: e?.pageIndex || this.tableConfig.pageIndex!,\r\n    //   filters: this.searchParam\r\n    // };\r\n    // this.dataService.getFireSysList(params).pipe(finalize(() => {\r\n    //   this.tableLoading(false);\r\n    // })).subscribe((data => {\r\n    //   const {list, total, pageNum} = data;\r\n    //   this.dataList = [...list];\r\n    //   this.tableConfig.total = total!;\r\n    //   this.tableConfig.pageIndex = pageNum!;\r\n    //   this.tableLoading(false);\r\n    //   this.checkedCashArray = [...this.checkedCashArray];\r\n    // }));\r\n  }\r\n\r\n  /*展开*/\r\n  toggleCollapse(): void {\r\n    this.isCollapse = !this.isCollapse;\r\n  }\r\n\r\n  /*查看*/\r\n  check(id: string, children: any[], parent: any[]): void {\r\n    this.message.success(id);\r\n    console.log(children);\r\n    console.log(parent);\r\n  }\r\n\r\n  /*重置*/\r\n  resetForm(): void {\r\n    this.searchParam = {};\r\n    this.getDataList();\r\n  }\r\n\r\n  add(): void {\r\n    // this.modalService.show({nzTitle: '新增'}).subscribe((res) => {\r\n    //   if (!res || res.status === ModalBtnStatus.Cancel) {\r\n    //     return;\r\n    //   }\r\n    //   this.tableLoading(true);\r\n    //   this.addEditData(res.modalValue, 'addFireSys');\r\n    // }, error => this.tableLoading(false));\r\n  }\r\n\r\n  del(id: number): void {\r\n    this.modalSrv.confirm({\r\n      nzTitle: '确定要删除吗？',\r\n      nzContent: '删除后不可恢复',\r\n      nzOnOk: () => {\r\n        this.tableLoading(true);\r\n        this.message.info(`id数组(支持分页保存):${JSON.stringify(id)}`);\r\n        this.getDataList();\r\n        this.checkedCashArray.splice(\r\n          this.checkedCashArray.findIndex(item => item.id === id),\r\n          1\r\n        );\r\n        this.tableLoading(false);\r\n        /*注释的是模拟接口调用*/\r\n        // this.dataService.delFireSys([id]).subscribe(() => {\r\n        //   if (this.dataList.length === 1) {\r\n        //     this.tableConfig.pageIndex--;\r\n        //   }\r\n        //   this.getDataList();\r\n        //   this.checkedCashArray.splice(this.checkedCashArray.findIndex(item => item.id === id), 1);\r\n        // }, error => this.tableLoading(false));\r\n      }\r\n    });\r\n  }\r\n\r\n  allDel(): void {\r\n    if (this.checkedCashArray.length > 0) {\r\n      this.modalSrv.confirm({\r\n        nzTitle: '确定要删除吗？',\r\n        nzContent: '删除后不可恢复',\r\n        nzOnOk: () => {\r\n          const tempArrays: number[] = [];\r\n          this.checkedCashArray.forEach(item => {\r\n            tempArrays.push(item.id);\r\n          });\r\n          this.tableLoading(true);\r\n          this.message.info(`数组(支持分页保存):${JSON.stringify(tempArrays)}`);\r\n          this.getDataList();\r\n          this.checkedCashArray = [];\r\n          this.tableLoading(false);\r\n          // 注释的是模拟接口的调用\r\n          // this.dataService.delFireSys(tempArrays).subscribe(() => {\r\n          //   if (this.dataList.length === 1) {\r\n          //     this.tableConfig.pageIndex--;\r\n          //   }\r\n          //   this.getDataList();\r\n          //   this.checkedCashArray = [];\r\n          // }, error => this.tableLoading(false));\r\n        }\r\n      });\r\n    } else {\r\n      this.message.error('请勾选数据');\r\n      return;\r\n    }\r\n  }\r\n\r\n  // 修改\r\n  edit(id: number): void {\r\n    // this.dataService.getFireSysDetail(id).subscribe(res => {\r\n    //   this.modalService.show({nzTitle: '编辑'}, res).subscribe(({modalValue, status}) => {\r\n    //     if (status === ModalBtnStatus.Cancel) {\r\n    //       return;\r\n    //     }\r\n    //     modalValue.id = id;\r\n    //     this.tableLoading(true);\r\n    //     this.addEditData(modalValue, 'editFireSys');\r\n    //   }, error => this.tableLoading(false));\r\n    // });\r\n  }\r\n\r\n  // addEditData(param: FireSysObj, methodName: 'editFireSys' | 'addFireSys'): void {\r\n  //   this.dataService[methodName](param).subscribe(() => {\r\n  //     this.getDataList();\r\n  //   });\r\n  // }\r\n\r\n  changeSort(e: SortFile): void {\r\n    this.message.info(`排序字段：${e.fileName},排序为:${e.sortDir}`);\r\n  }\r\n\r\n  // 最左侧复选框选中触发\r\n  selectedChecked(e: any): void {\r\n    this.checkedCashArray = [...e];\r\n    console.log(this.checkedCashArray);\r\n  }\r\n\r\n  // 修改一页几条\r\n  changePageSize(e: number): void {\r\n    this.tableConfig.pageSize = e;\r\n  }\r\n\r\n  private initTable(): void {\r\n    /*\r\n     * 注意，这里需要留一列不要设置width，让列表自适应宽度\r\n     *\r\n     * */\r\n    this.tableConfig = {\r\n      headers: [\r\n        {\r\n          title: '姓名',\r\n          width: 230,\r\n          field: 'name',\r\n          showSort: true,\r\n          tdClassList: ['operate-text']\r\n        },\r\n        {\r\n          title: '性别',\r\n          field: 'sex',\r\n          width: 230,\r\n          tdTemplate: this.highLightTpl\r\n        },\r\n        {\r\n          title: '年龄',\r\n          field: 'age',\r\n          width: 230,\r\n          showSort: true\r\n        },\r\n        {\r\n          title: '住址',\r\n          field: 'address'\r\n        },\r\n        {\r\n          title: '操作',\r\n          tdTemplate: this.operationTpl,\r\n          width: 130,\r\n          fixed: true,\r\n          fixedDir: 'right'\r\n        }\r\n      ],\r\n      total: 0,\r\n      showCheckbox: true,\r\n      loading: false,\r\n      pageSize: 10,\r\n      pageIndex: 1\r\n    };\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initTable();\r\n  }\r\n}\r\n","<!--头部版块-->\r\n<app-page-header [pageHeaderInfo]=\"pageHeaderInfo\"></app-page-header>\r\n\r\n<div class=\"normal-table-wrap\">\r\n  <nz-card [nzBodyStyle]=\"{ 'padding-bottom': 0 }\" class=\"m-b-10\">\r\n    <app-water-mark></app-water-mark>\r\n    <form nz-form>\r\n      <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24 }\">\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n          <nz-form-item>\r\n            <nz-form-label [nzFor]=\"\">规则名称</nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input placeholder=\"请输入\" name=\"ruleName\" [(ngModel)]=\"searchParam.ruleName\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n          <nz-form-item>\r\n            <nz-form-label [nzFor]=\"\">描述</nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input placeholder=\"请输入\" name=\"desc\" [(ngModel)]=\"searchParam.desc\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <ng-container *ngIf=\"!isCollapse\">\r\n          <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n            <nz-form-item>\r\n              <nz-form-label [nzFor]=\"\">服务调用次数</nz-form-label>\r\n              <nz-form-control>\r\n                <input nz-input placeholder=\"请输入\" name=\"desc\" [(ngModel)]=\"searchParam.desc\" />\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n            <nz-form-item>\r\n              <nz-form-label [nzFor]=\"\">状态</nz-form-label>\r\n              <nz-form-control>\r\n                <input nz-input placeholder=\"请输入\" name=\"desc\" [(ngModel)]=\"searchParam.desc\" />\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\">\r\n            <nz-form-item>\r\n              <nz-form-label [nzFor]=\"\">上次调度时间</nz-form-label>\r\n              <nz-form-control>\r\n                <input nz-input placeholder=\"请输入\" name=\"desc\" [(ngModel)]=\"searchParam.desc\" />\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <div nz-col [nzXXl]=\"8\" [nzXl]=\"8\" [nzLg]=\"8\" [nzMd]=\"12\" [nzSm]=\"24\" [nzXs]=\"24\" class=\"m-b-8 text-right p-0\">\r\n          <button nz-button [nzType]=\"'primary'\">\r\n            <i nz-icon nzType=\"search\"></i>\r\n            搜索\r\n          </button>\r\n          <button nz-button class=\"m-l-15\" (click)=\"resetForm()\">\r\n            <i nz-icon nzType=\"close-circle\" nzTheme=\"outline\"></i>\r\n            重置\r\n          </button>\r\n          <a class=\"collapse operate-text\" (click)=\"toggleCollapse()\">\r\n            <span *ngIf=\"isCollapse\">展开</span>\r\n            <span *ngIf=\"!isCollapse\">收起</span>\r\n            <i nz-icon [nzType]=\"isCollapse ? 'down' : 'up'\"></i>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </nz-card>\r\n\r\n  <app-card-table-wrap (reload)=\"reloadTable()\" [btnTpl]=\"tableBtns\">\r\n    <app-tree-table\r\n      (selectedChange)=\"selectedChecked($event)\"\r\n      [cashArray]=\"checkedCashArray\"\r\n      (sortFn)=\"changeSort($event)\"\r\n      [tableConfig]=\"tableConfig\"\r\n      (changePageSize)=\"changePageSize($event)\"\r\n      (changePageNum)=\"getDataList($event)\"\r\n      [tableData]=\"dataList\"\r\n    ></app-tree-table>\r\n    <ng-template #operationTpl let-id=\"id\" let-children=\"children\" let-parent=\"parent\">\r\n      <span class=\"operate-text\" (click)=\"check(id, children, parent)\">查看</span>\r\n      <!--添加了权限的写法-->\r\n      <!-- <span *appAuth=\"ActionCode.FireSysSettingDel\" class=\"operate-text\" (click)=\"del(id)\">删除</span>-->\r\n      <span class=\"operate-text\" (click)=\"del(id)\">删除</span>\r\n      <span class=\"operate-text\" (click)=\"edit(id)\">编辑</span>\r\n    </ng-template>\r\n  </app-card-table-wrap>\r\n</div>\r\n<ng-template #highLightTpl let-sex=\"sex\">\r\n  <nz-badge nzStatus=\"processing\" [nzText]=\"sex\"></nz-badge>\r\n</ng-template>\r\n<ng-template #tableBtns>\r\n  <button (click)=\"add()\" nz-button nzType=\"primary\" class=\"m-r-8\">\r\n    <i nz-icon nzType=\"plus\"></i>\r\n    新建\r\n  </button>\r\n  <button (click)=\"allDel()\" nz-button nzType=\"default\">\r\n    <i nz-icon nzType=\"delete\"></i>\r\n    删除\r\n  </button>\r\n</ng-template>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { TreeListRoutingModule } from './tree-list-routing.module';\r\nimport { TreeListComponent } from './tree-list.component';\r\n\r\n@NgModule({\r\n  declarations: [TreeListComponent],\r\n  imports: [SharedModule, TreeListRoutingModule]\r\n})\r\nexport class TreeListModule {}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}