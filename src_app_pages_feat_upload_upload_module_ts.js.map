{"version":3,"file":"src_app_pages_feat_upload_upload_module_ts.js","mappings":"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","sources":["./src/app/pages/feat/upload/upload-routing.module.ts","./src/app/pages/feat/upload/upload.component.ts","./src/app/pages/feat/upload/upload.component.html","./src/app/pages/feat/upload/upload.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { UploadComponent } from '@app/pages/feat/upload/upload.component';\r\n\r\nconst routes: Routes = [{ path: '', component: UploadComponent, data: { title: 'Tải lên tệp', key: 'upload' } }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UploadRoutingModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\nimport { AbstractControl, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\nimport { environment } from '@env/environment';\r\nimport { PageHeaderType } from '@shared/components/page-header/page-header.component';\r\nimport { fnCheckForm } from '@utils/tools';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzUploadChangeParam, NzUploadFile } from 'ng-zorro-antd/upload';\r\n\r\n@Component({\r\n  selector: 'app-upload',\r\n  templateUrl: './upload.component.html',\r\n  styleUrls: ['./upload.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class UploadComponent implements OnInit {\r\n  pageHeaderInfo: Partial<PageHeaderType> = {\r\n    title: '文件上传',\r\n    breadcrumb: ['首页', '功能', '文件上传'],\r\n    desc: '简单弄一下，返回的都是服务器统一返回的文件'\r\n  };\r\n  uploadUrl = environment.production ? '/api/file/test/upload/document/' : '/site/api/file/test/upload/document/';\r\n  fileList: NzUploadFile[] = [];\r\n  fileFormList: NzUploadFile[] = [];\r\n  validateForm!: FormGroup;\r\n\r\n  constructor(public message: NzMessageService, private fb: FormBuilder) {}\r\n\r\n  handleChange(info: NzUploadChangeParam): void {\r\n    if (info.type === 'success') {\r\n      if (info.file.response.code === 0) {\r\n        this.message.success(`服务器上返回的文件路径：${info.file.response.data.data}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  uploadFn(e: NzUploadChangeParam): void {\r\n    if (e.type === 'success') {\r\n      if (e.file.response.code === 0) {\r\n        this.validateForm.get('file')?.setValue(e.file.response.data.data);\r\n      }\r\n    }\r\n  }\r\n\r\n  resetForm(): void {\r\n    this.validateForm.reset();\r\n    this.fileFormList = [];\r\n  }\r\n\r\n  submitForm(): void {\r\n    if (!fnCheckForm(this.validateForm)) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  initForm(): void {\r\n    this.validateForm = this.fb.group({\r\n      file: [null, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n  }\r\n}\r\n","<app-page-header [pageHeaderInfo]=\"pageHeaderInfo\"></app-page-header>\r\n<div class=\"normal-table-wrap\">\r\n  <nz-card nzTitle=\"简单实例，服务器返回的文件地址统一，演示功能不会保存上传的文件\">\r\n    <nz-upload [nzName]=\"'document'\" [nzShowButton]=\"true\" [nzAction]=\"uploadUrl\" [nzLimit]=\"1\" [nzSize]=\"1024 * 5\" (nzChange)=\"handleChange($event)\" [nzFileList]=\"fileList\">\r\n      <button nz-button>\r\n        <i nz-icon nzType=\"upload\"></i>\r\n        导入材料(最大测试上传5M)\r\n      </button>\r\n    </nz-upload>\r\n  </nz-card>\r\n  <nz-card class=\"m-t-20\" nzTitle=\"嵌入表单，加入表单验证\">\r\n    <form nz-form nzLayout=\"vertical\" [formGroup]=\"validateForm\">\r\n      <nz-form-item nz-col nzSpan=\"24\">\r\n        <nz-form-control [nzSm]=\"6\" [nzXs]=\"24\" [nzErrorTip]=\"combineTpl\">\r\n          <nz-form-label [nzSm]=\"14\" [nzXs]=\"24\">附件：</nz-form-label>\r\n          <nz-form-control [nzSm]=\"14\" [nzXs]=\"24\">\r\n            <nz-upload [nzName]=\"'document'\" (nzChange)=\"uploadFn($event)\" [nzAction]=\"uploadUrl\" [nzSize]=\"1024 * 5\" [nzFileList]=\"fileFormList\" [nzLimit]=\"1\">\r\n              <button nz-button>\r\n                <i nz-icon nzType=\"upload\"></i>\r\n                上传附件(最大测试上传5M)\r\n              </button>\r\n              <input formControlName=\"file\" [hidden]=\"true\" />\r\n            </nz-upload>\r\n          </nz-form-control>\r\n        </nz-form-control>\r\n        <nz-form-item nz-row class=\"m-t-20\">\r\n          <nz-form-control [nzSpan]=\"14\">\r\n            <button nz-button (click)=\"submitForm()\" nzType=\"primary\">提交</button>\r\n            <button class=\"m-l-10\" (click)=\"resetForm()\" nz-button nzType=\"default\">重置</button>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </nz-form-item>\r\n    </form>\r\n  </nz-card>\r\n</div>\r\n<ng-template #combineTpl let-control>\r\n  <ng-container *ngIf=\"control.hasError('message')\">{{ control.errors.message }}</ng-container>\r\n  <ng-container *ngIf=\"control.hasError('required')\">必填项</ng-container>\r\n</ng-template>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { UploadRoutingModule } from './upload-routing.module';\r\nimport { UploadComponent } from './upload.component';\r\n\r\n@NgModule({\r\n  declarations: [UploadComponent],\r\n  imports: [SharedModule, UploadRoutingModule]\r\n})\r\nexport class UploadModule {}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}